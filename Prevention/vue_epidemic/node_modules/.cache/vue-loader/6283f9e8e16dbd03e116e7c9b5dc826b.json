{"remainingRequest":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\src\\components\\main\\leave.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\src\\components\\main\\leave.vue","mtime":1623840209000},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627120038379},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1627120038376},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627120038379},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1627120054798}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgICAgVXNlclNpemU6MCwKICAgICAgICAgIGN1cnJlbnRQYWdlOiAxMiwKICAgICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgICBwYWdlU2l6ZTo1LAogICAgICAgICAgcGFnZU5vOjEsCiAgICAgICAgICBjdXJyZW50UGFnZTE6IDEwLAogICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICB0aGlzLmdldGFwcGxpY2F0aW9uKHRoaXMucGFnZU5vLHRoaXMucGFnZVNpemUpCiAgICB9LAogICAgZmlsdGVyczp7CiAgICAgICAgZGF0ZSh0aW1lKXsKICAgICAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUodGltZSk7CiAgICAgICAgICAgIC8vIHl5eXktbW0tZGQKICAgICAgICAgICAgdmFyIHkgPSBkdC5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICB2YXIgbSA9IGR0LmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICB2YXIgZCA9IGR0LmdldERhdGUoKTsKICAgICAgICAgICAgdmFyIGhoID0gZHQuZ2V0SG91cnMoKTsKICAgICAgICAgICAgdmFyIG1tID0gZHQuZ2V0TWludXRlcygpOwogICAgICAgICAgICB2YXIgc3MgPSBkdC5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIHJldHVybiB5ICsgIi0iICsgbSArICItIiArIGQgKyAiICAiICsgaGggKyAiOiIgKyBtbSArICI6IiArIHNzCiAgICAgICAgfSwKICAgICAgICBzdGF0ZTEoaW50KXsKICAgICAgICAgICAgaWYoaW50PT0wKXtyZXR1cm4gIuacquWuoeaJuSJ9OwogICAgICAgICAgICBpZihpbnQ9PTEpe3JldHVybiAi5a6h5om55LiN6YCa6L+HIn07CiAgICAgICAgICAgIGlmKGludD09Mil7cmV0dXJuICLlrqHmibnpgJrov4cifTsKICAgICAgICB9LAogICAgfSwKICAgICBtZXRob2RzOiB7CiAgICAgICAgIC8qKgogICAgICAgICAgKiDkv67mlLnlrqHmibnnirbmgIHkuLrlkIzmhI8KICAgICAgICAgIGxfaWQ6cm93LmxfaWQsCiAgICAgICAgICB1cFN0YXRlOjIKICAgICAgICAgICovCiAgICAgIHZpZXcoaW5kZXgscm93LHVwU3RhdGUpewogICAgICAgICAgdGhpcy4kYXhpb3Nqd3QoewogICAgICAgICAgICAgIHVybDoiL2FkbWluL3VwTGVhdmVTdGF0ZSIsCiAgICAgICAgICAgICAgbWV0aG9kOiJnZXQiLAogICAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgICBsX2lkOnJvdy5sX2lkLAogICAgICAgICAgICAgICAgICB1cFN0YXRlCiAgICAgICAgICAgICAgfSxzdWNjZXNzOihyZXN1bHQpPT57CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0YXBwbGljYXRpb24odGhpcy5wYWdlTm8sdGhpcy5wYWdlU2l6ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICB9KQoKCgogICAgICB9LAogICAgICAgICAvKioKICAgICAgICAgIOiOt+WPluivt+WBh+WNlQogICAgICAgICAgKiBAcGFyYW0gbm8KICAgICAgICAgICogQHBhcmFtIHNpemUKICAgICAgICAgIGN1cnJQYWdlOm5vLAogICAgICAgICAgcGFnZU51bTpzaXplCiAgICAgICAgICB0aGlzLnBhZ2VObz0xCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YT1yZXN1bHQuZGF0YTsKICAgICAgICAgIHRoaXMuVXNlclNpemUgPSByZXN1bHQudG90YWwKICAgICAgICAgICovCiAgICAgICAgIGdldGFwcGxpY2F0aW9uKG5vLHNpemUpewogICAgICAgICAgIG5vPU51bWJlcihubyktMQogICAgICAgICAgdGhpcy4kYXhpb3Nqd3QoewogICAgICAgICAgICAgIHVybDonL2FkbWluL2dldExlYXZlJywKICAgICAgICAgICAgICBtZXRob2Q6J2dldCcsCiAgICAgICAgICAgICAgZGF0YTp7CiAgICAgICAgICAgICAgICAgIGN1cnJQYWdlOm5vLAogICAgICAgICAgICAgICAgICBwYWdlTnVtOnNpemUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLHN1Y2Nlc3M6KHJlc3VsdCk9PnsKICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlTm89MQogICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YT1yZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgICAgdGhpcy5Vc2VyU2l6ZSA9IHJlc3VsdC50b3RhbAogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSwKCgogICAgICAgICAvL+WIhumhtQogICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZT12YWw7CiAgICAgICAgICAgICB0aGlzLmdldGFwcGxpY2F0aW9uKHRoaXMucGFnZU5vLHRoaXMucGFnZVNpemUpCiAgICAgICAgIH0sCiAgICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgICB0aGlzLnBhZ2VObz12YWw7CiAgICAgICAgICAgICB0aGlzLmdldGFwcGxpY2F0aW9uKHRoaXMucGFnZU5vLHRoaXMucGFnZVNpemUpCiAgICAgICAgIH0KICAgIH0sCn0K"},{"version":3,"sources":["leave.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"leave.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card>\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align:center\">\n            <span>请假管理</span>\n          </div>\n          <el-table\n            :data=\"tableData\"\n            border\n            style=\"width: 100%\">\n            <el-table-column\n              label=\"申请时间\">\n              <template slot-scope=\"scope\">{{ scope.row.createtime | date}}</template>\n            </el-table-column>\n            <el-table-column\n                    prop=\"u_id\"\n              label=\"申请人\">\n              <!--<template slot-scope=\"scope\">{{ scope.row.u_id | username}}</template>-->\n            </el-table-column>\n            <el-table-column\n              prop=\"leavetype\"\n              label=\"类型\">\n            </el-table-column>\n            <el-table-column\n              prop=\"reason\"\n              label=\"详细信息\">\n            </el-table-column>\n            <el-table-column\n              prop=\"state\"\n              label=\"审核结果\">\n              <template slot-scope=\"scope\">{{ scope.row.state | state1}}</template>\n            </el-table-column>\n            <el-table-column\n              label=\"操作\">\n              <template slot-scope=\"scope\">\n                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"view(scope.$index, scope.row,2)\">同意</el-button>\n                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"view(scope.$index, scope.row,1)\">拒绝</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          <div class=\"block\" style=\"text-align:center;margin-top:20px\">\n            <el-pagination\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    :current-page=\"currentPage\"\n                    :page-sizes=\"[5, 10, 15, 20,25]\"\n                    :page-size=\"5\"\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :total=\"UserSize\">\n            </el-pagination>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n      return {\n          UserSize:0,\n          currentPage: 12,\n          tableData: [],\n          pageSize:5,\n          pageNo:1,\n          currentPage1: 10,\n      }\n    },\n    created(){\n      this.getapplication(this.pageNo,this.pageSize)\n    },\n    filters:{\n        date(time){\n            var dt = new Date(time);\n            // yyyy-mm-dd\n            var y = dt.getFullYear();\n            var m = dt.getMonth() + 1;\n            var d = dt.getDate();\n            var hh = dt.getHours();\n            var mm = dt.getMinutes();\n            var ss = dt.getSeconds();\n            return y + \"-\" + m + \"-\" + d + \"  \" + hh + \":\" + mm + \":\" + ss\n        },\n        state1(int){\n            if(int==0){return \"未审批\"};\n            if(int==1){return \"审批不通过\"};\n            if(int==2){return \"审批通过\"};\n        },\n    },\n     methods: {\n         /**\n          * 修改审批状态为同意\n          l_id:row.l_id,\n          upState:2\n          */\n      view(index,row,upState){\n          this.$axiosjwt({\n              url:\"/admin/upLeaveState\",\n              method:\"get\",\n              data:{\n                  l_id:row.l_id,\n                  upState\n              },success:(result)=>{\n                  this.getapplication(this.pageNo,this.pageSize)\n              }\n          })\n\n\n\n      },\n         /**\n          获取请假单\n          * @param no\n          * @param size\n          currPage:no,\n          pageNum:size\n          this.pageNo=1\n          this.tableData=result.data;\n          this.UserSize = result.total\n          */\n         getapplication(no,size){\n           no=Number(no)-1\n          this.$axiosjwt({\n              url:'/admin/getLeave',\n              method:'get',\n              data:{\n                  currPage:no,\n                  pageNum:size\n              }\n              ,success:(result)=>{\n                  this.pageNo=1\n                  this.tableData=result.data;\n                  this.UserSize = result.total\n              }\n          })\n        },\n\n\n         //分页\n         handleSizeChange(val) {\n             this.pageSize=val;\n             this.getapplication(this.pageNo,this.pageSize)\n         },\n         handleCurrentChange(val) {\n             this.pageNo=val;\n             this.getapplication(this.pageNo,this.pageSize)\n         }\n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n"]}]}