{"remainingRequest":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue","mtime":1623840209000},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627120038379},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1627120038376},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627120038379},{"path":"D:\\前端开发\\Campus-epidemic-prevention-and-control-syste\\Prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1627120054798}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgVXNlclNpemU6IDAsCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgICAgICB0YWJsZURhdGE6IFtdLAogICAgICAgICAgICBwYWdlU2l6ZTogNSwKICAgICAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0dmFsdWUodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pOwogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBkYXRlKHRpbWUpIHsKICAgICAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUodGltZSk7CiAgICAgICAgICAgIC8vIHl5eXktbW0tZGQKICAgICAgICAgICAgdmFyIHkgPSBkdC5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICB2YXIgbSA9IGR0LmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICB2YXIgZCA9IGR0LmdldERhdGUoKTsKICAgICAgICAgICAgdmFyIGhoID0gZHQuZ2V0SG91cnMoKTsKICAgICAgICAgICAgdmFyIG1tID0gZHQuZ2V0TWludXRlcygpOwogICAgICAgICAgICB2YXIgc3MgPSBkdC5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIHJldHVybiB5ICsgIi0iICsgbSArICItIiArIGQgKyAiICAiICsgaGggKyAiOiIgKyBtbSArICI6IiArIHNzCiAgICAgICAgfSwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb3BlbjIodikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHYsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDlt7Lor7vkuI7mnKror7vovazmjaIKICAgICAgICAgKiBAcGFyYW0gaW5kZXgKICAgICAgICAgKiBAcGFyYW0gcm93CiAgICAgICAgICovCiAgICAgICAgcmVhZE4oaW5kZXgsIHJvdykgewogICAgICAgICAgICB0aGlzLiRheGlvc2p3dCh7CiAgICAgICAgICAgICAgICB1cmw6Ii9zdHVkZW50cy9nb3dlaWR1IiwKICAgICAgICAgICAgICAgIG1ldGhvZDoiZ2V0IiwKICAgICAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgICAgIG5faWQ6cm93Lm5faWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuMign5bey5L+u5pS55Li65pyq6K+7JykKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldHZhbHVlKHRoaXMucGFnZVNpemUsIHRoaXMucGFnZU5vKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZWFkWShpbmRleCwgcm93KSB7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zand0KHsKICAgICAgICAgICAgICAgIHVybDoiL3N0dWRlbnRzL2dveWlkdSIsCiAgICAgICAgICAgICAgICBtZXRob2Q6ImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOnsKICAgICAgICAgICAgICAgICAgICBuX2lkOnJvdy5uX2lkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0bmV3KCkKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4yKCflt7Lkv67mlLnkuLrlt7Lor7snKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKCiAgICAgICAgLyoqCiAgICAgICAgICog5oiR55qE6YCa55+l5YiG6aG16I635Y+W5pWw5o2u5LiO5pWw6YePCiAgICAgICAgICogKi8KICAgICAgICBnZXR2YWx1ZShwYWdlTnVtLCBjdXJyUGFnZSkgewogICAgICAgICAgICB0aGlzLiRheGlvc2p3dCh7CiAgICAgICAgICAgICAgICB1cmw6ICIvc3R1ZGVudHMvZ2V0Tm90aWNlIiwKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgcGFnZU51bTogcGFnZU51bSwKICAgICAgICAgICAgICAgICAgICBjdXJyUGFnZTogY3VyclBhZ2UgLSAxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlclNpemUgPSByZXN1bHQudG90YWw7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuZm9yRWFjaCgodiwgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB2LnR5cGUxID0gIuacquivuyIKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRuZXcoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOiOt+WPlueahOaIkemAmuefpeW3suivu+WIl+ihqCjkvpvlt7Lor7vmnKror7vnirbmgIHmuLLmn5MpCiAgICAgICAgICovCiAgICAgICAgZ2V0bmV3KCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6L+b5YWlZ2V0bmV3IikKICAgICAgICAgICAgLy/nrYnlkIzkuo7nu5HlrpoKICAgICAgICAgICAgdGhpcy4kYXhpb3Nqd3QoewogICAgICAgICAgICAgICAgdXJsOiIvc3R1ZGVudHMvZ2V0Tm90aWNlUmVhZCIsCiAgICAgICAgICAgICAgICBtZXRob2Q6ImdldCIsCiAgICAgICAgICAgICAgICBkYXRhOnt9LAogICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5ZCm5bey6K+75pyq6K+7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gaXRlbS5uX2lkOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gdmFsdWUubl9pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnR5cGUxID0gIuW3suivuyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvL+WIhumhtQogICAgICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgICAgICAgIHRoaXMuZ2V0dmFsdWUodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLnBhZ2VObyA9IHZhbDsKICAgICAgICAgICAgdGhpcy5nZXR2YWx1ZSh0aGlzLnBhZ2VTaXplLCB0aGlzLnBhZ2VObykKICAgICAgICB9CiAgICB9LAp9Cg=="},{"version":3,"sources":["myNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myNotice.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\n    <div>\n        <el-row>\n            <el-col :span=\"24\">\n                <el-card>\n                    <div slot=\"header\" class=\"clearfix\" style=\"text-align:center\">\n                        <span>我的通知</span>\n                    </div>\n                    <el-table\n                            :data=\"tableData\"\n                            border\n                            :default-sort=\"{prop: 'date', order: 'descending'}\"\n                            style=\"width: 100%\">\n                        <el-table-column\n                                prop=\"n_id\"\n                                sortable\n                                label=\"序列号\">\n                        </el-table-column>\n                        <el-table-column\n                                prop=\"title\"\n                                label=\"主题\">\n                        </el-table-column>\n                        <el-table-column\n                                prop=\"type1\"\n                                label=\"状态\">\n                        </el-table-column>\n                        <el-table-column\n                                label=\"创建时间\">\n                            <template slot-scope=\"scope\">{{ scope.row.createtime | date}}</template>\n                        </el-table-column>\n                        <el-table-column\n                                label=\"操作\">\n                            <template slot-scope=\"scope\">\n                                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"readN(scope.$index, scope.row)\">\n                                    未读\n                                </el-button>\n                                <el-button style=\"padding: 3px 0\" type=\"text\" @click=\"readY(scope.$index, scope.row)\">\n                                    已读\n                                </el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                    <div class=\"block\" style=\"text-align:center;margin-top:20px\">\n                        <el-pagination\n                                @size-change=\"handleSizeChange\"\n                                @current-change=\"handleCurrentChange\"\n                                :current-page=\"currentPage\"\n                                :page-sizes=\"[5, 10, 15, 20,25]\"\n                                :page-size=\"5\"\n                                layout=\"total, sizes, prev, pager, next, jumper\"\n                                :total=\"UserSize\">\n                        </el-pagination>\n                    </div>\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                show: true,\n                UserSize: 0,\n                currentPage: 1,\n                tableData: [],\n                pageSize: 5,\n                pageNo: 1,\n            }\n        },\n        created() {\n            this.getvalue(this.pageSize, this.pageNo);\n        },\n        filters: {\n            date(time) {\n                var dt = new Date(time);\n                // yyyy-mm-dd\n                var y = dt.getFullYear();\n                var m = dt.getMonth() + 1;\n                var d = dt.getDate();\n                var hh = dt.getHours();\n                var mm = dt.getMinutes();\n                var ss = dt.getSeconds();\n                return y + \"-\" + m + \"-\" + d + \"  \" + hh + \":\" + mm + \":\" + ss\n            },\n        },\n        methods: {\n            open2(v) {\n                this.$message({\n                    message: v,\n                    type: 'success'\n                });\n            },\n            /**\n             * 已读与未读转换\n             * @param index\n             * @param row\n             */\n            readN(index, row) {\n                this.$axiosjwt({\n                    url:\"/students/goweidu\",\n                    method:\"get\",\n                    data:{\n                        n_id:row.n_id\n                    },\n                    success: (result) => {\n                        this.open2('已修改为未读')\n                        this.getvalue(this.pageSize, this.pageNo);\n                    }\n                });\n            },\n            readY(index, row) {\n                this.$axiosjwt({\n                    url:\"/students/goyidu\",\n                    method:\"get\",\n                    data:{\n                        n_id:row.n_id\n                    },\n                    success: (result) => {\n                        this.getnew()\n                        this.open2('已修改为已读')\n                    }\n                });\n            },\n\n\n            /**\n             * 我的通知分页获取数据与数量\n             * */\n            getvalue(pageNum, currPage) {\n                this.$axiosjwt({\n                    url: \"/students/getNotice\",\n                    method: \"get\",\n                    data: {\n                        pageNum: pageNum,\n                        currPage: currPage - 1\n                    },\n                    success: (result) => {\n                        this.UserSize = result.total;\n                        result.data.forEach((v, i) => {\n                            v.type1 = \"未读\"\n                        })\n                        this.tableData = result.data;\n                        this.getnew()\n                    }\n                });\n            },\n            /**\n             * 获取的我通知已读列表(供已读未读状态渲染)\n             */\n            getnew() {\n                console.log(\"进入getnew\")\n                //等同于绑定\n                this.$axiosjwt({\n                    url:\"/students/getNoticeRead\",\n                    method:\"get\",\n                    data:{},\n                    success: (result) => {\n                        //判断是否已读未读\n                        result.forEach(((item, index) => {\n                            let val = item.n_id;\n                            this.tableData.forEach((value, index) => {\n                                if (val == value.n_id) {\n                                    value.type1 = \"已读\"\n                                }\n                            })\n                        }))\n                    }\n                });\n            },\n            //分页\n            handleSizeChange(val) {\n                this.pageSize = val;\n                this.getvalue(this.pageSize, this.pageNo)\n            },\n            handleCurrentChange(val) {\n                this.pageNo = val;\n                this.getvalue(this.pageSize, this.pageNo)\n            }\n        },\n    }\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n"]}]}